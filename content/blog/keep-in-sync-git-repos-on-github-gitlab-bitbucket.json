{"title":"Keep in sync your Git repos on GitHub, GitLab & Bitbucket","headings":[{"level":2,"text":"Git Tooling","id":"git-tooling"},{"level":3,"text":"Github","id":"github"},{"level":3,"text":"GitLab","id":"gitlab"},{"level":4,"text":"Please set an endpoint to API","id":"please-set-an-endpoint-to-api"},{"level":3,"text":"BitBucket","id":"bitbucket"},{"level":2,"text":"Create a repo on GitHub, GitLab & Bitbucket using CLI","id":"create-a-repo-on-github-gitlab--bitbucket-using-cli"},{"level":3,"text":"Your git repo exists","id":"your-git-repo-exists"},{"level":3,"text":"You don't have a git repo yet","id":"you-dont-have-a-git-repo-yet"},{"level":3,"text":"Create repo on GitHub via CLI","id":"create-repo-on-github-via-cli"},{"level":3,"text":"Create repo on GitLab via CLI","id":"create-repo-on-gitlab-via-cli"},{"level":3,"text":"Create repo on BitBucket via CLI","id":"create-repo-on-bitbucket-via-cli"},{"level":2,"text":"Configuring remotes","id":"configuring-remotes"},{"level":3,"text":"Problem is git pull will only pull from the first url.","id":"problem-is-git-pull-will-only-pull-from-the-first-url"},{"level":3,"text":"Pulling from multiple remotes with different updates","id":"pulling-from-multiple-remotes-with-different-updates"},{"level":4,"text":"Note about force push","id":"note-about-force-push"},{"level":6,"text":"GitHub","id":"github-1"},{"level":5,"text":"GitLab","id":"gitlab-1"},{"level":2,"text":"For existing GitHub repos","id":"for-existing-github-repos"},{"level":2,"text":"FAQ","id":"faq"},{"level":3,"text":"Handling issues and Pull/Merge request","id":"handling-issues-and-pullmerge-request"},{"level":3,"text":"Commit from web UI","id":"commit-from-web-ui"},{"level":2,"text":"tl;dr","id":"tldr"},{"level":3,"text":"For each repos","id":"for-each-repos"},{"level":2,"text":"Bonus: badges","id":"bonus-badges"}],"tags":["git","github","gitlab","bitbucket"],"date":"2018-06-04T00:00:00.000Z","body":{"tag":"div","children":[{"tag":"p","children":["Sharing code online is pretty easy these days. But keeping in sync your repos on\nmultiples places is a bit harder. You will easily find scripts and commands to\nimport/export stuff somewhere. Same thing for read-only mirrors, pretty easy.\nBut having a transparent workflow to be able to push your code on multiple\nplaces is not that easy. But hey, it's not hard neither."]},"\n",{"tag":"p","children":["You can decide to use GitHub, which the most used solution this days, but maybe,\njust in case of long outages or because you don‚Äôt want to be tied to GitHub that\nmuch (for political reasons, or just because they had been acquired by Microsoft\nand you are afraid of the Skype syndrome), you may want to have ",{"tag":"em","children":["not-read-only\nmirrors"]}," of your repos somewhere else."]},"\n",{"tag":"p","children":[{"tag":"strong","children":["Here is a nice trick to keep in sync real git repos on multiple places"]}," like\nGitLab and BitBucket, that you can pull and push to, without any efforts after a\nquick initial setup. Not read-only mirrors. Real repos. And this ",{"tag":"strong","children":["just be\nrelying on git pull and push features"]},"."]},"\n",{"tag":"p","children":[{"tag":"em","children":["Reminder: to be safe setup SSH and Two factor Auth (2FA) for all places (except\nfor BitBucket, cause it‚Äôs not compatible with the CLI tool)."]}]},"\n","\n",{"tag":"h2","props":{"id":"git-tooling"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#git-tooling"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Git Tooling"]},"\n",{"tag":"p","children":["In order to facilitate the setup, we will install some CLI tools for each\nservices."]},"\n",{"tag":"h3","props":{"id":"github"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#github"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Github"]},"\n",{"tag":"p","children":["We will use ",{"tag":"a","props":{"href":"https://github.com/github/hub"},"children":["hub"]},"."]},"\n",{"tag":"p","children":["For macOS"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["brew install hub"]}]},"\n",{"tag":"p","children":["See\n",{"tag":"a","props":{"href":"https://github.com/github/hub#installation"},"children":["Hub installation instruction page"]},"\nfor others OS."]},"\n",{"tag":"p","children":["You will need a ",{"tag":"a","props":{"href":"https://github.com/settings/tokens/new"},"children":["GitHub token"]},"."]},"\n",{"tag":"p","children":["Place it in your home folder in a ",{"tag":"code","children":[".github_token"]}," file, and load it in your\n",{"tag":"code","children":[".bash/zshrc"]}," like this:"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-sh"},"children":[{"tag":"span","props":{"class":"hljs-keyword"},"children":["if"]}," [[ -f ",{"tag":"span","props":{"class":"hljs-variable"},"children":["$HOME"]},"/.github_token ]]\n",{"tag":"span","props":{"class":"hljs-keyword"},"children":["then"]},"\n  ",{"tag":"span","props":{"class":"hljs-built_in"},"children":["export"]}," GITHUB_TOKEN=$(cat ",{"tag":"span","props":{"class":"hljs-variable"},"children":["$HOME"]},"/.github_token)\n",{"tag":"span","props":{"class":"hljs-keyword"},"children":["fi"]}]}]},"\n",{"tag":"h3","props":{"id":"gitlab"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#gitlab"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"GitLab"]},"\n",{"tag":"p","children":[{"tag":"a","props":{"href":"http://narkoz.github.io/gitlab/cli"},"children":["GitLab CLI"]}," is available via\n",{"tag":"a","props":{"href":"https://rubygems.org/"},"children":["rubygem"]},":"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["gem install gitlab"]}]},"\n",{"tag":"p","children":["(You might want to use ",{"tag":"code","children":["sudo gem install"]}," if you rely on macOS ruby version.)"]},"\n",{"tag":"h4","props":{"id":"please-set-an-endpoint-to-api"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#please-set-an-endpoint-to-api"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},{"tag":"code","children":["Please set an endpoint to API"]}]},"\n",{"tag":"p","children":["GitLab requires a token and an endpoint (because you can setup a GitLab instance\nyourself)."]},"\n",{"tag":"p","children":["For the token,\n",{"tag":"a","props":{"href":"https://gitlab.com/profile/account"},"children":["grab your GitLab private token here"]}," and\nuse the same solution as GitHub. Here is an example using GitLab ‚Äúofficial‚Äù\nonline instance that you should add in your ",{"tag":"code","children":[".bash/zshrc"]},":"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-sh"},"children":[{"tag":"span","props":{"class":"hljs-keyword"},"children":["if"]}," [[ -f ",{"tag":"span","props":{"class":"hljs-variable"},"children":["$HOME"]},"/.gitlab_token ]]\n",{"tag":"span","props":{"class":"hljs-keyword"},"children":["then"]},"\n  ",{"tag":"span","props":{"class":"hljs-built_in"},"children":["export"]}," GITLAB_API_PRIVATE_TOKEN=$(cat ",{"tag":"span","props":{"class":"hljs-variable"},"children":["$HOME"]},"/.gitlab_token)\n",{"tag":"span","props":{"class":"hljs-keyword"},"children":["fi"]},"\n",{"tag":"span","props":{"class":"hljs-built_in"},"children":["export"]}," GITLAB_API_ENDPOINT=",{"tag":"span","props":{"class":"hljs-string"},"children":["\"https://gitlab.com/api/v3\""]}]}]},"\n",{"tag":"h3","props":{"id":"bitbucket"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#bitbucket"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"BitBucket"]},"\n",{"tag":"p","children":[{"tag":"a","props":{"href":"https://bitbucket.org/zhemao/bitbucket-cli"},"children":["BitBucket CLI"]}," is available via\n",{"tag":"a","props":{"href":"https://pip.pypa.io/en/stable/"},"children":["pip"]},":"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-sh"},"children":["pip install bitbucket-cli"]}]},"\n",{"tag":"p","children":["(You might want to use ",{"tag":"code","children":["sudo pip install"]}," if you rely on macOS Python version.)"]},"\n",{"tag":"p","children":["BitBucket does not work well with a token‚Ä¶ 2fa is not convenient (and\n",{"tag":"a","props":{"href":"https://bitbucket.org/zhemao/bitbucket-cli/issues/25/create-issue-ssh-not-taken-in"},"children":["impossible to use with ssh"]},").\nSo you will have to enter login/pwd all the time or\n",{"tag":"a","props":{"href":"https://bitbucket.org/zhemao/bitbucket-cli#markdown-header-configuration"},"children":["put that in clear in a .bitbucket file"]},"."]},"\n",{"tag":"hr"},"\n",{"tag":"p","children":["Now that we have all the tools, let's start by creating a repo on each services."]},"\n",{"tag":"h2","props":{"id":"create-a-repo-on-github-gitlab--bitbucket-using-cli"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#create-a-repo-on-github-gitlab--bitbucket-using-cli"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Create a repo on GitHub, GitLab & Bitbucket using CLI"]},"\n",{"tag":"p","children":["The commands below assume that your username is the same on each services. If\nthat's not the case, just adjust the command by replacing all variables."]},"\n",{"tag":"p","children":["We will create/reuse a folder, init a local git repo, and push it to all those\nservices."]},"\n",{"tag":"h3","props":{"id":"your-git-repo-exists"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#your-git-repo-exists"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Your git repo exists"]},"\n",{"tag":"p","children":["We will assume that the folder name is the name of the project."]},"\n",{"tag":"p","children":["Open a terminal session and do"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["export GIT_USER_NAME=$USER\nexport GIT_REPO_NAME=$(basename $(pwd))"]}]},"\n",{"tag":"p","children":["Adjust variables if the snippet above is not matching your setup."]},"\n",{"tag":"h3","props":{"id":"you-dont-have-a-git-repo-yet"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#you-dont-have-a-git-repo-yet"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"You don't have a git repo yet"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["export GIT_USER_NAME=$USER\nexport GIT_REPO_NAME=\"your-repo\"\nmkdir $GIT_REPO_NAME && cd $GIT_REPO_NAME\ngit init"]}]},"\n",{"tag":"h3","props":{"id":"create-repo-on-github-via-cli"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#create-repo-on-github-via-cli"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Create repo on GitHub via CLI"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["hub create"]}]},"\n",{"tag":"p","children":["This command create the repo and add the remote automatically."]},"\n",{"tag":"h3","props":{"id":"create-repo-on-gitlab-via-cli"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#create-repo-on-gitlab-via-cli"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Create repo on GitLab via CLI"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["gitlab create_project $GIT_REPO_NAME \"{visibility_level: 20}\""]}]},"\n",{"tag":"p","children":["(Public visibility). ",{"tag":"a","props":{"href":"http://stackoverflow.com/a/31338095/988941"},"children":["Source"]}]},"\n",{"tag":"p","children":["We will add the remote later, it's part of the trick ;)"]},"\n",{"tag":"h3","props":{"id":"create-repo-on-bitbucket-via-cli"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#create-repo-on-bitbucket-via-cli"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Create repo on BitBucket via CLI"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["bb create --protocol=ssh --scm=git --public $GIT_REPO_NAME"]}]},"\n",{"tag":"p","children":[{"tag":"a","props":{"href":"http://stackoverflow.com/a/12795747/988941"},"children":["Source"]}]},"\n",{"tag":"h2","props":{"id":"configuring-remotes"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#configuring-remotes"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Configuring remotes"]},"\n",{"tag":"p","children":["Depending on what you want or need, you will have multiple choice to configure\nyour repo."]},"\n",{"tag":"p","children":["For a single main repo and simple ‚Äúmirrors‚Äù, you can use this"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git remote set-url origin --add https://gitlab.com/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\ngit remote set-url origin --add https://bitbucket.org/${GIT_USER_NAME}/${GIT_REPO_NAME}.git"]}]},"\n",{"tag":"p","children":["You can check that the commands are ok with"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git remote -v"]}]},"\n",{"tag":"p","children":["This should give you something like this"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["origin  https://github.com/YOU/YOUR-REPO.git (fetch)\norigin  https://github.com/YOU/YOUR-REPO.git (push)\norigin  https://gitlab.com/YOU/YOUR-REPO.git (push)\norigin  https://bitbucket.org/YOU/YOUR-REPO.git (push)\n"]}]},"\n",{"tag":"p","children":["Now you can just use ",{"tag":"code","children":["git push"]}," and it will push on all remote üôÇ."]},"\n",{"tag":"hr"},"\n",{"tag":"p","children":["‚ö†Ô∏è ",{"tag":"strong","children":["Note: to enforce ssh instead of https here is a simple trick"]}]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git config --global url.ssh://git@github.com/.insteadOf https://github.com/\ngit config --global url.ssh://git@gitlab.com/.insteadOf https://gitlab.com/\ngit config --global url.ssh://git@bitbucket.org/.insteadOf https://bitbucket.org/"]}]},"\n",{"tag":"h3","props":{"id":"problem-is-git-pull-will-only-pull-from-the-first-url"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#problem-is-git-pull-will-only-pull-from-the-first-url"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Problem is ",{"tag":"code","children":["git pull"]}," will only pull from the first url."]},"\n",{"tag":"p","children":["There is inconsitencies with ",{"tag":"code","children":["git push --all"]}," (push all branches to default\nremote) and ",{"tag":"code","children":["git pull --all"]}," (pull from the first url of the default remote)."]},"\n",{"tag":"p","children":[{"tag":"a","props":{"href":"https://astrofloyd.wordpress.com/2015/05/05/git-pushing-to-and-pulling-from-multiple-remote-locations-remote-url-and-pushurl/"},"children":["Here is a detailed post on configuring multiples remote for push, pull or both"]},"."]},"\n",{"tag":"p","children":[{"tag":"em","children":["tl;dr: we will have to add other remotes to be able to push."]}]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git remote add origin-gitlab https://gitlab.com/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\ngit remote add origin-bitbucket https://bitbucket.org/${GIT_USER_NAME}/${GIT_REPO_NAME}.git"]}]},"\n",{"tag":"p","children":["You can double check the setup with this command again"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git remote -v"]}]},"\n",{"tag":"p","children":["Should give you something like this"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["origin  ssh://git@github.com/YOU/YOUR-REPO.git (fetch)\norigin  ssh://git@github.com/YOU/YOUR-REPO.git (push)\norigin  ssh://git@gitlab.com/YOU/YOUR-REPO.git (push)\norigin  ssh://git@bitbucket.org/YOU/YOUR-REPO.git (push)\norigin-gitlab   ssh://git@gitlab.com/YOU/YOUR-REPO.git (fetch)\norigin-gitlab   ssh://git@gitlab.com/YOU/YOUR-REPO.git (push)\norigin-bitbucket    ssh://git@bitbucket.org/YOU/YOUR-REPO.git (fetch)\norigin-bitbucket    ssh://git@bitbucket.org/YOU/YOUR-REPO.git (push)\n"]}]},"\n",{"tag":"p","children":["Now you can use ",{"tag":"code","children":["git push"]}," to push to all remotes and use ",{"tag":"code","children":["git pull --all"]}," to\npull from all remotes."]},"\n",{"tag":"p","children":[{"tag":"strong","children":["My 2 cents: use an alias to ",{"tag":"code","children":["pull --all"]}," by default."]}]},"\n",{"tag":"p","children":["If you have a single remote this won‚Äôt change anything and will work if you have\nmore than one."]},"\n",{"tag":"p","children":["In my ",{"tag":"code","children":[".bashrc"]},"/",{"tag":"code","children":[".zshrc"]}]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-sh"},"children":[{"tag":"span","props":{"class":"hljs-built_in"},"children":["alias"]}," g=",{"tag":"span","props":{"class":"hljs-string"},"children":["\"git\""]}]}]},"\n",{"tag":"p","children":["In my ",{"tag":"code","children":[".gitconfig"]}]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-ini"},"children":[{"tag":"span","props":{"class":"hljs-attr"},"children":["g"]}," = pull --all\n",{"tag":"span","props":{"class":"hljs-attr"},"children":["p"]}," = push"]}]},"\n",{"tag":"p","children":["Now I use ",{"tag":"code","children":["g g"]}," to pull and ",{"tag":"code","children":["g p"]}," to push."]},"\n",{"tag":"h3","props":{"id":"pulling-from-multiple-remotes-with-different-updates"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#pulling-from-multiple-remotes-with-different-updates"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Pulling from multiple remotes with different updates"]},"\n",{"tag":"p","children":["One edge case can be problematic: a commit in master in one repo (eg: pull\nrequest on github), and another in another distant repo (eg: merge request on\ngitlab). You may be able to fetch all those things (if you use\n",{"tag":"a","props":{"href":"https://github.com/MoOx/setup/blob/60ec182707168e4cf9ffcb2d0351dc0ce2eac7ed/dotfiles/.gitconfig#L30-L31"},"children":[{"tag":"code","children":["pull --rebase"]}," by default"]},")\nbut when you will want to push back... You will have a failure unless you force\npush."]},"\n",{"tag":"p","children":["This is the only (edge case) that can be problematic. If you accept PR/MR with\ncare, you should not face this very often."]},"\n",{"tag":"h4","props":{"id":"note-about-force-push"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#note-about-force-push"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Note about force push"]},"\n",{"tag":"p","children":["If you encounter this case and want to force push, be sure that your branch is\nnot protected on"]},"\n",{"tag":"h6","props":{"id":"github-1"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#github-1"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"GitHub"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["https://github.com/${GIT_USER_NAME}/${GIT_REPO_NAME}/settings/branches\n"]}]},"\n",{"tag":"h5","props":{"id":"gitlab-1"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#gitlab-1"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"GitLab"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["https://gitlab.com/${GIT_USER_NAME}/${GIT_REPO_NAME}/protected_branches\n"]}]},"\n",{"tag":"p","children":["GitLab protect the master branch ",{"tag":"strong","children":["by default"]},". So force push will not work if\nyou don't change configuration."]},"\n",{"tag":"p","children":["I always make one force push or two for the first commit of a project, when CI\nfail etc (don't juge me). ",{"tag":"strong","children":["Now you have been warned."]}]},"\n",{"tag":"h2","props":{"id":"for-existing-github-repos"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#for-existing-github-repos"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"For existing GitHub repos"]},"\n",{"tag":"p","children":["I didn't find or setup an automated way to do this technique for all repos at\nonce. So each time I work on a project that I want to \"backup\", I check my memo\nand run the appropriate command for the places where my repo is missing."]},"\n",{"tag":"p","children":["Alternatively, you might be interested by this things"]},"\n",{"tag":"ul","children":["\n",{"tag":"li","children":[{"tag":"a","props":{"href":"https://pypi.python.org/pypi/github2gitlab"},"children":["https://pypi.python.org/pypi/github2gitlab"]}]},"\n",{"tag":"li","children":[{"tag":"a","props":{"href":"https://github.com/xuhdev/backup-on-the-go"},"children":["https://github.com/xuhdev/backup-on-the-go"]}]},"\n"]},"\n",{"tag":"h2","props":{"id":"faq"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#faq"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"FAQ"]},"\n",{"tag":"h3","props":{"id":"handling-issues-and-pullmerge-request"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#handling-issues-and-pullmerge-request"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Handling issues and Pull/Merge request"]},"\n",{"tag":"p","children":["Good question. For that, I don‚Äôt have the silver bullet. I think I will use\nGitHub as the main repo. But if there is outage, I will have fallbacks! That‚Äôs\nthe idea of this approach: not being tied that much to a single service."]},"\n",{"tag":"h3","props":{"id":"commit-from-web-ui"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#commit-from-web-ui"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Commit from web UI"]},"\n",{"tag":"p","children":["Not a problem. I tried. You commit on the web (eg: comment, notes in README\netc). You pull via CLI, you push. Done. The origin you edited on the web will be\nup to date already, but others will be updated."]},"\n",{"tag":"hr"},"\n",{"tag":"h2","props":{"id":"tldr"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#tldr"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"tl;dr"]},"\n",{"tag":"p","children":[{"tag":"strong","children":["Once"]}," Install some CLI tools"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["brew install hub\ngem install gitlab\npip install bitbucket-cli"]}]},"\n",{"tag":"p","children":["Note: be sure to have tokens as env var, see the beginning of this post for\ndetails."]},"\n",{"tag":"p","children":["(Also, configure a git alias that will do ",{"tag":"code","children":["pull --all"]}," if you want to pull all\nremote by default.)"]},"\n",{"tag":"h3","props":{"id":"for-each-repos"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#for-each-repos"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"For each repos"]},"\n",{"tag":"ol","children":["\n",{"tag":"li","children":["Export your username (assuming you have the same on all platforms)"]},"\n"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["export GIT_USER_NAME=$USER"]}]},"\n",{"tag":"ol","props":{"start":2},"children":["\n",{"tag":"li","children":["For new repo (if your repo already exist on GitHub, go to step below.)"]},"\n"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["export GIT_REPO_NAME=your-repo\nmkdir $GIT_REPO_NAME && cd $GIT_REPO_NAME\ngit init\nhub create"]}]},"\n",{"tag":"ol","props":{"start":3},"children":["\n",{"tag":"li","children":["For existing GitHub repo"]},"\n"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["export GIT_REPO_NAME=$(basename $(pwd))\ngitlab create_project $GIT_REPO_NAME \"{visibility_level: 20}\"\nbb create --protocol=ssh --scm=git --public $GIT_REPO_NAME"]}]},"\n",{"tag":"p","children":["Then, to add remotes"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["git remote set-url origin --add https://gitlab.com/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\ngit remote set-url origin --add https://bitbucket.org/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\ngit remote add origin-gitlab https://gitlab.com/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\ngit remote add origin-bitbucket https://bitbucket.org/${GIT_USER_NAME}/${GIT_REPO_NAME}.git\n"]}]},"\n",{"tag":"ol","props":{"start":4},"children":["\n",{"tag":"li","children":["Check that everything is ok"]},"\n"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-console"},"children":["git remote -v"]}]},"\n",{"tag":"p","children":["You should get something like"]},"\n",{"tag":"pre","children":[{"tag":"code","children":["origin  ssh://git@github.com/YOU/YOUR-REPO.git (fetch)\norigin  ssh://git@github.com/YOU/YOUR-REPO.git (push)\norigin  ssh://git@gitlab.com/YOU/YOUR-REPO.git (push)\norigin  ssh://git@bitbucket.org/YOU/YOUR-REPO.git (push)\norigin-bitbucket        ssh://git@bitbucket.org/YOU/YOUR-REPO.git (push)\norigin-bitbucket        ssh://git@bitbucket.org/YOU/YOUR-REPO.git (fetch)\norigin-gitlab   ssh://git@gitlab.com/YOU/YOUR-REPO.git (fetch)\norigin-gitlab   ssh://git@gitlab.com/YOU/YOUR-REPO.git (push)\n"]}]},"\n",{"tag":"p","children":["üòá Now you can just ",{"tag":"code","children":["git push"]}," and ",{"tag":"code","children":["git pull --all"]},"!"]},"\n",{"tag":"h2","props":{"id":"bonus-badges"},"children":[{"tag":"a","props":{"aria-hidden":"true","href":"#bonus-badges"},"children":[{"tag":"span","props":{"class":"icon icon-link"}}]},"Bonus: badges"]},"\n",{"tag":"p","children":["You can add some nices badges to show the redundancy on your project README"]},"\n",{"tag":"pre","children":[{"tag":"code","props":{"class":"hljs language-markdown"},"children":["[",{"tag":"span","props":{"class":"hljs-string"},"children":["![Repo on GitHub"]},"](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://img.shields.io/badge/repo-GitHub-3D76C2.svg"]},")](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://github.com/YOU/YOUR-REPO"]},")\n[",{"tag":"span","props":{"class":"hljs-string"},"children":["![Repo on GitLab"]},"](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://img.shields.io/badge/repo-GitLab-6C488A.svg"]},")](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://gitlab.com/YOU/YOUR-REPO"]},")\n[",{"tag":"span","props":{"class":"hljs-string"},"children":["![Repo on BitBucket"]},"](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://img.shields.io/badge/repo-BitBucket-1F5081.svg"]},")](",{"tag":"span","props":{"class":"hljs-link"},"children":["https://bitbucket.org/YOU/YOUR-REPO"]},")"]}]},"\n",{"tag":"p","children":[{"tag":"strong","children":["Adjust ",{"tag":"code","children":["YOU/YOUR-REPO"]}," to your need in the markdown"]},"."]},"\n",{"tag":"p","children":["It will look like this"]},"\n",{"tag":"p","children":[{"tag":"a","props":{"href":"https://github.com/YOU/YOUR-REPO"},"children":[{"tag":"img","props":{"src":"https://img.shields.io/badge/repo-GitHub-3D76C2.svg","alt":"Repo on GitHub"}}]},"\n",{"tag":"a","props":{"href":"https://gitlab.com/YOU/YOUR-REPO"},"children":[{"tag":"img","props":{"src":"https://img.shields.io/badge/repo-GitLab-6C488A.svg","alt":"Repo on GitLab"}}]},"\n",{"tag":"a","props":{"href":"https://bitbucket.org/YOU/YOUR-REPO"},"children":[{"tag":"img","props":{"src":"https://img.shields.io/badge/repo-BitBucket-1F5081.svg","alt":"Repo on BitBucket"}}]}]},"\n",{"tag":"p","children":["I pushed this ",{"tag":"a","props":{"href":"https://github.com/MoOx/git-init"},"children":["tl;dr on a repo"]},", maybe I will\nmake a script someday üòÑ. Well, three repos."]},"\n",{"tag":"ul","children":["\n",{"tag":"li","children":[{"tag":"a","props":{"href":"https://github.com/MoOx/git-init"},"children":["https://github.com/MoOx/git-init"]}]},"\n",{"tag":"li","children":[{"tag":"a","props":{"href":"https://gitlab.com/MoOx/git-init"},"children":["https://gitlab.com/MoOx/git-init"]}]},"\n",{"tag":"li","children":[{"tag":"a","props":{"href":"https://bitbucket.org/MoOx/git-init"},"children":["https://bitbucket.org/MoOx/git-init"]}]},"\n"]}]}}